architecture Behavioral of ALU is
begin
    process(data1, data2, aluop)
        variable A, B    : signed(31 downto 0);
        variable result  : signed(31 downto 0);
    begin
        A := signed(data1);
        B := signed(data2);
        result := (others => '0');

        case aluop is
            when "0000" =>  result := A and B;          -- AND
            when "0001" =>  result := A or B;           -- OR
            when "0010" =>  result := A + B;            -- ADD
            when "0110" =>  result := A - B;            -- SUB
            when "1100" =>  result := not (A or B);     -- NOR
            when "0111" =>                              -- SLT
                if A < B then
                    result := (others => '0');
                    result(0) := '1';
                else
                    result := (others => '0');
                end if;
            when others =>
                result := (others => '0');
        end case;

        dataout <= std_logic_vector(result);
        zflag   <= '1' when result = 0 else '0';
        nflag   <= result(31);
    end process;
end Behavioral;

